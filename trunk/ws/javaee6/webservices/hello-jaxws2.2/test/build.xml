<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 1997-2007 Sun Microsystems, Inc. All rights reserved.-->

<project name="hello-jaxws-test" default="runtest" basedir=".">
    <import file="../../../../bp-project/test.xml"/>
    <import file="../../../../bp-project/main.xml"/>
    <property name="classesdir" value="../build"/>
    <property name="clientclasses" value="../hello-jaxws-client/build/classes"/>

    <path id="classpath">
        <pathelement location="${javaee.home}/lib/j2ee.jar"/>
        <pathelement location="${classesdir}"/>
        <pathelement location="${clientclasses}"/>
    </path>

    <target name="runtime">
        <subant target="default" verbose="true">
            <fileset dir=".." includes="build.xml"/>
        </subant>
        <subant target="deploy" verbose="true">
            <fileset dir=".." includes="build.xml"/>
        </subant>
        <subant target="jaxws" verbose="true">
            <fileset dir="../hello-jaxws-client" includes="build.xml"/>
        </subant>
        <subant target="default" verbose="true">
            <fileset dir="../hello-jaxws-client" includes="build.xml"/>
        </subant>
    </target>
	
    <target name="compile" depends="runtime">
        <javac srcdir="./src/java" destdir="${classesdir}">
            <classpath refid="classpath"/>
        </javac>
    </target>


    <target name="runtest" depends="compile">
        <echo message="Testing ${module.name} ..."/>
        <echo message="Running the unit test for hello-jaxws" />
        <java classname="test.Hello_jaxws_test" fork="on">
            <arg value="${javaee.home}"/>
            <arg value="${clientclasses}"/>
            <classpath refid="classpath"/>
            <sysproperty key="java.endorsed.dirs" value="${javaee.home}/lib/endorsed" />
        </java>
        <ant dir=".." inheritAll="false" target="restore"/>
    </target>

</project>
