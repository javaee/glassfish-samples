<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
    <head>
        <title>The Java Persistence Sample Application</title>
        <style type="text/css">
            body,th,td,p,div,span,a,ul,ul li, ol, ol li, ol li b, dl,h1,h2,h3,h4,h5,h6,li
            {font-family:geneva,helvetica,arial,"lucida sans",sans-serif; font-size:10pt}
            h1 {font-size:18pt}
            h2 {font-size:14pt}
            h3 {font-size:12pt}
            code,kbd,tt,pre {font-family:monaco,courier,"courier new";font-size:10pt;color:#666}
            li {padding-bottom: 8px}
            p.copy, p.copy a {font-family:geneva,helvetica,arial,"lucida sans",sans-serif; font-size:8pt}
            p.copy {text-align: center}
        </style>
    </head>
    <body style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"
        alink="#333366" link="#594fbf" marginwidth="10" vlink="#1005fb">
        <table border="0" cellpadding="2" cellspacing="4" width="100%">
            <tbody>
                <tr>
                    <td align="right" bgcolor="#587993" valign="top"> <font
                        color="#ffffff" size="-1"><b>Sun Java System Application Server</b></font>&nbsp;
                    </td>
                </tr>
            </tbody>
        </table>
        <!---- Don't modify anything above this line, except for the title tag -------->
        <p><a href="../../../docs/list.html">Samples Index</a></p>
        <h1><h1>The Java Persistence Sample Application</h1>
        This sample demonstrates the use of Java Persistence APIs based on the new Java Persistence specification. 
        It interacts with a relational database to store and display information about customer subscriptions to periodicals. 
        The sample is built and deployed as an EAR file. It consists of two modules:<br>
        <br>
        <b>Web Module</b>
        <blockquote>The web module consists of jsp files which contain the presentation logic for the sample. The starting point of the application is index.html, from here you can navigate to different features, such as creating a customer, searching for a customer, searching for an address, creating more subscriptions and editing a customer profile. On each of these pages you will find a [HOME] link, which will take you back to the index.html main page.</blockquote>
        <br>
        <b>EJB Module</b>
        <blockquote>The ejb module consists of a Stateless Session Bean, the persistence unit and some supporting classes. 
            The CustomerSession Stateless Session Bean is looked up by the jsp files and based on the client inputs, appropriate business methods are invoked on it. 
            The CustomerSession Stateless Session Bean uses resource injection to get access to an EntityManager. It uses the entity manager for all persistence related operations, such as inserts, updates and lookups. 
            The entity classes are Address, Customer and Subscription. These are plain old java objects (POJOs) with meta-data annotations, which describes their database mappings, associations with other entities and fetch strategy.
            The persistence classes are archived in customer-cmp-ejb.jar along with a persistence.xml, which defines the EntityManager provider class and the database connection information for the persistence unit. 
        </blockquote>
        <BR>
        <b>Application archive</b>
        <blockquote> 
            The web-module and ejb-module are archived in customer-cmp-ear.ear.
        </blockquote>
        <br>

        If you are familiar with EJB 2.1 persistence, you will notice a lot of changes in this example based on the new Java Persistence specification. Although, the same functionality as EJB 2.1 is achieved in this sample, you will notice the sample is much simpler than it's corresponding EJB 2.1 version. Firstly, there are no complex and arcane deployment descriptors; all meta-data information is specified by annotations and you do not have to implement any EJBLocalObject or EJBObject interfaces. Secondly, you can rely a great deal on defaults, so you code for the exceptional cases. This will significantly reduce your turnaround time for implementations. Thirdly, and probably most importantly this allows you to switch your persistence implementation to any vendor which supports the Java Persistence specification.
        <br>
        <br>
        <h2>Building, Deploying, and Running the Application</h2>
        <p>
        </p>
        <p>Following are the instructions for building, deploying, and running
            this sample application. <br>
            <br>
        </p>
        <ol>
            <li> Setup your build environment and Configure the application
            server with which the build system has to work by following the <a
            href="../../../docs/UserREADME.html">
            common build instructions.</a></li>
            <li><code><i>app_dir</i></code> is the sample application base
            directory: <code><i>install_dir</i>/samples/ws/java-ee5/enterprise/customer-cmp-ear</code></li>
            <li><code></code><code></code>Change directory to <code><i>app_dir.<br>
            </i></code></li>
            <li>Setup the database
                <p><span style="font-style: italic;">app_dir&gt; </span><code>ant
                setup </code></p>
                <p>Above target does<code> start-db, create-db,
                    create-txnal-jdbc-resource and create-ntxnal-jdbc-resource<br>
                </code></p>
            </li>
            <li>Setup database, Build, Deploy and Run the sample application
            using the target all<code></code></li>
            <p><code><span style="font-style: italic;">app_dir&gt; </span></code>ant
            all </p>
            <li>It is possible to do the above separately by issuing separate
            commands as given below.</li>
            <p><code><span style="font-style: italic;">app_dir&gt; </span>ant
            default</code> compiles and packages the application </p>
            <p><code><span style="font-style: italic;">app_dir&gt; </span>ant
            deploy</code> deploys it to application server </p>
            <p><code><span style="font-style: italic;">app_dir&gt; </span>ant
                run</code> runs the sample from a browser using the URL given below<br>
            </p>
            <p><code><span style="font-style: italic;">http://[deployment-host]:8080/customer/index.html<br>
                <br>
            </span> </code></p>
            <li>Unsetup the database
            <p><span style="font-style: italic;">app_dir&gt; </span><code>ant
            unsetup </code></p>
            Above target does<code> delete-txnal-jdbc-resource and
                delete-ntxnal-jdbc-resource, stop-db<br>
            </code></li>
            <li>Use the target clean to
                remove the temporary directories like build and dist
                <p><code><span style="font-style: italic;">app_dir&gt; </span>ant
                clean</code> </p>
            </li>
        </ol>
        <h2>Troubleshooting</h2>
        <p>If you have problems when running the application, refer to <a
            href="../../../docs/UserTroubleShooting.html">
            troubleshooting document</a>.
        </p>
        &nbsp;
        <p><!--- Do not modify the rest of the document --></p>
        <hr noshade="noshade" size="1"><!-- start copyright -->
        <p class="copy"> Copyright &copy; 2006 <a href="http://sun.com/">Sun
        Microsystems, Inc.</a>
        All rights reserved. </p>
        <!--  end copyright  -->
    </body>
</html>
