<?xml version="1.0" encoding="UTF-8"?>

<project name="glassfish-samples" default="package-zip" basedir=".">
    <description>Builds, tests, and packages the project glassfish-samples.</description>

    <property file="samples.properties"/>

    <property name="tmpdist" value="dist"/>

    <target name="init" depends="clean">
    </target>

    <target name="package-zip" depends="init"
        description="packages the samples into a single zip">
        <mkdir dir="${tmpdist}"/>
        <copy file="javaee5/docs/sdk_samples_index.html" tofile="${tmpdist}/index.html"/>
        <zip destfile="${release.zipfile}">
            <zipfileset dir="${tmpdist}" 
                includes="index.html"/>
            <zipfileset dir="." 
                includes="bp-project/**, javaee5/**"
                excludes="bp-project/build.properties,javaee5/docs/DeveloperREADME.html, javaee5/docs/DeveloperTroubleShooting.html, javaee5/docs/sample_doc_template.html,javaee5/docs/sdk_samples_index.html,javaee5/enterprise/hello-stateless-ejb/**,javaee5/enterprise/duke-stateful-ear/**"/>
        </zip>
    </target>

    <target name="package-jar" depends="init"
        description="packages the samples into a single jar">
        <mkdir dir="${tmpdist}"/>
        <jar destfile="${release.jarfile}">
            <zipfileset dir="." 
                prefix="${release.fullname}" 
                includes="bp-project/**, build.xml, docs/**, index.html, javaee5/**"
                excludes="bp-project/build.properties,docs/DeveloperREADME.html, docs/DeveloperTroubleShooting.html, docs/sample_doc_template.html,javaee5/hello-stateless-ejb/**,javaee5/duke-stateful-ear/**"/>
        </jar>
    </target>

    <target name="clean"
        description="cleans workspace by removing temporary directories like dist">
        <delete dir="${tmpdist}"/>
    </target>

</project>
